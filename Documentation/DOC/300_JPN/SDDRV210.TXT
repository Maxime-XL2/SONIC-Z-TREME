サウンドドライバ(SDDRV.TSK, SDDRVS.TSK）の変更点

　version 2.04から2.10へのバージョンアップ

●フェード中にsequence stopを発行するとモードステータスの表示が「２」に
なったままであるというバグを修正。

●「tempo change」ルーチンを挿入。

●シーケンススタート時、次のラベルのMIDI用データを初期化（0クリア）する。
  program_number
  midi_panpot
  midi_flag
  bank_address
  knr_PBend_BF

●シーケンススタート時、次のラベルのワークエリアを初期化(0x0080)する。
  midi_master_volume
  midi_volume
  midi_expression
  noteon_master_volume
  total_volume

●sound initコマンドでワークエリアの一部が初期化されていないというバグを修正。

●フェード中にポーズをかけるとポーズ中であるにもかかわらず、内部的には音量減衰
  がストップしないというバグを修正。これにより「フェード中にポーズ→しばらく待
  つ→ポーズ解除」で曲が終わるという不具合を解消。

●次のような条件のリクエストコマンドに耐えるようにした。
  sequence volume > sequence start > sequence volume(fadeout) > sequence
  volume > sequence start

●スロットアサインのアルゴリズムが新しいものになりました。以前のものとはまった
  くちがいます。また、スロットが空いているかどうかをリリースレベルで判断するよ
  うにしました。リリースを見るプログラムはLEVEL 2 INT内で動作しています。詳細
  はサウンドドライバ2.10のプログラムドキュメントを参照してください。

●マップチェンジ時のプチノイズを解消。しかし、SCSPの出力レベルをプログラムで減
  衰させるという手法を用いているため、演奏中にマップチェンジ、エフェクトチェン
  ジを行ってはなりません。必ずシーケンスストップの状態でなければなりません。

●note onより先にpitch bendが入ると反応しないという不具合を修正。

●トーンエディタからチェックボックスをマークしてもモジュレーションが反応しない
  というバグを修正。

●FMとPCMの判別が正確でなかったというバグを修正。

●レーシングコントロール用インターフェースのベースアドレスを0x0007c0から
  0x006f00へ移動。

●スロットの状態（出力レベル）を0x07c0からの32バイトにストアするようにした。

●ダイナミックフィルタがまったく効いていなかったというバグを修正。


1996.1.26

　version 2.00から2.04へのバージョンアップ


● DSPのソフトウェアモジュレーションルーチンの削除。

● 連続したシーケンスのリクエストでもダンパーオンがクリアされるようになりました。一旦演奏を止めてから次の曲をリクエストすればダンパーは必ずクリアされます。

● Pauseをかけると発音管理番号によってはプログラムが暴走することがあるというバグを修正。ちなみに 2.00でも発音管理番号０のときには発生しません。

●VOICEのPLAY MODEがPOLY以外のとき、サウンドシミュレータに対してエラーを返すようにしました(138)。

● note onルーチンを高速化。いわゆる「曲がもたる」といった現象はかなり改善されました。

● 発音管理番号０以外でsequence volumeのかかり具合がおかしいというバグを修正しました。

● ホストコマンドからsequence panを送ったとき、ストリーム再生中だとそちらのpanにも影響してしまうというバグを修正しました。

● note on中にMIDI コントロールチェンジの panpotを送っても効果がかからないというバグを修正しました。

● sequence startの直前にsequence volumeをセットしても効果がかからないというバグを修正しました。

